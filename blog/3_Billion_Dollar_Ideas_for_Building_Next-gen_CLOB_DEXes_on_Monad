---
title: 30亿美元的构想--在 Monad 上构建下一代 CLOB DEX
description: 本文深入探讨了 如何在Monad上构建下一代CLOB DEX，并且详细分析介绍了CLOB DEX。
image: /blog/CD1.png
---

# 30亿美元的构想--在 Monad 上构建下一代 CLOB DEX

![CD1](/blog/CD1.png)

:::tip 原文
https://x.com/FishMarketAcad/status/1933574838360457398  
翻译：keyneszeng
:::

由于交易者要求中心化交易所的精确度、低滑点和熟悉的体验，中心化限价订单簿 (CLOB) 是 DeFi 领域的热门话题。

然而，如今基于链上 CLOB 的现货 DEX 仍然存在以下老问题：
1.流动性分散
2.资本使用效率低下
3.闲置资产

我在最早的完全链上混合订单簿 DEX 之一工作了四年，在此期间，我对如何改进 CLOB 有一些想法。我相信下一代 DEX 不会仅仅在链上复制 CEX 的功能；它们会进行超越 CEX 的创新。

本文探讨了三个创新特性，我相信它们可以解决上述问题，并将 CLOB 转变为更优越的交易原语：
1.Omni Orderbook（又名 Omnibook）
2.并行流动性订单簿（又名 PLOB）
3.综合借贷

虽然这是 3 个独立的想法，但它们并不互相排斥，因为它们是解决不同问题的独立层，并且实际上可以构建成一个强大的单一 DEX。

让我们看看这些概念是如何工作的，当然还有为什么像 Monad 这样的高性能、并行化的 EVM 具有独特的优势，可以将这些疯狂的想法变为现实。

注意：这是一篇包含许多概念的长文，我强烈建议您将其加入书签并重读以完全理解它们，如果您是可以执行这些概念的开发人员，Monad 很乐意为您提供支持！


## 1. Omnibook：统一的流动性层
在独立的 DEX 上进行任何大规模的市场买入都可能造成严重的滑点。然而，具备 Omnibook 功能的 DEX 可以智能地拆分订单，并将其路由到多个平台，以实现最佳执行效果。其核心是一个复杂的匹配引擎，可以实时显示聚合的流动性，所有操作均通过智能合约以原子方式执行。
这种智能路由的概念已经在 Monad 上被一些团队率先采用，例如@CloberDex，他们在网络上构建了第一个元聚合器。 

![CD2](/blog/CD2.png)

Omnibook 的愿景将这一关键步骤向前推进了一步：如果这些聚合流动性不再是一个“黑匣子”，而是在一个统一的订单簿上完全可视化，会怎么样？如果聚合的不仅仅是链上 AMM 的流动性，又会怎么样？
Omnibook 是一项聚合所有可用来源流动性的功能，例如（但不限于）：
1.自己的混合订单簿
2.链上流动性
3.中心化交易所
4.基于意图的系统

上述流动性来源及更多来源可以组合成单一、统一的订单簿界面，为交易者提供更深层次的市场和更小的价差。

让我们深入研究一下它们（以便开发人员能够受到启发）：

### 其自己的混合订单簿
DEX 的原生订单簿是其基础。现代 CLOB 不应强制采用一刀切的方案。混合订单簿既能满足需要精准限价订单的成熟做市商的需求，也能满足偏好更简单、一劳永逸体验的被动流动性提供者的需求。

这就是@KuruExchange 顺便说一下已经在 Monad 上实现了！
![CD3](/blog/CD3.png)

这不仅限于现货 DEX，@DrakeExchange 这是一个基于 Monad 原生构建的永久 DEX，还具有带有流动性保险库的混合订单簿！

![CD4](/blog/CD4.png)

这种混合模型将标准限价订单簿与集成的AMM 式流动性金库相结合。
- 对于活跃交易者和做市商：他们可以直接在 CLOB 上下限价单、报价并运行复杂的算法，就像在 CEX 上一样。
- 对于被动流动性提供者：他们可以将资产存入自动做市商 (AMM) 的金库。该金库会收集他们的资金池资金，并自动为他们在订单簿上提供流动性，从而赚取交易费，就像在 Uniswap 上一样。

这些保险库如何运作？
金库并非独立存在，而是与订单簿紧密集成。它通过算法将被动流动性头寸（通常基于常见的曲线，例如 Uniswap v2 的 x*y=k 模型、Uniswap v3 的集中区间，甚至 Kyberswap 针对 1:1 挂钩资产（不计收益）的放大系数）转换为 CLOB 上的一系列离散限价订单。
可以将其想象成将平滑的斜坡（AMM 曲线）变成非常精细的楼梯（一系列限价订单）。
这个过程在概念上类似于微积分中的一个核心原理：用离散步骤近似连续函数。在微积分中，你使用积分（具体来说是黎曼和）来求曲线下的面积，即通过对无数个小矩形的面积求和。

比较相似之处：
- 黎曼和中矩形的宽度（Δx）类似于订单簿上的价格变动单位（例如，0.01 美元或 1 个基点）。这是沿价格轴的离散步长。
- 矩形的高度（f（x））类似于特定价格点的流动性深度（订单规模） 。
- 黎曼和近似的总面积（积分）类似于价格范围内可用的总流动性。
![CD5](/blog/CD5.png)

这意味着矩形越薄，刻度尺寸越小，并且会让 AMM 流动性感觉更像顶级中心化交易所：
- 更低的价差：做市商可以将买卖价差控制在非常接近真实市场价格的水平，从而最大限度地降低买卖价差。这直接惠及交易者，使他们在每次掉期交易中损失更少。
- 更准确的定价：资产价格可以更高程度地反映市场情绪。
- 对流动性提供者 (LP) 的执行更公平：AMM 金库的行为更忠实地反映了其应遵循的纯数学曲线。其定价中的“缺口”更少，从而降低了被套利者利用不精确定价进行套利的风险。

那么，为什么不把最小变动价位做得很细呢？这有个缺点：每次把最小变动价位减半，任何给定范围内的价格点数量就会翻倍。

对于试图将其曲线“整合”（这番话很有意思）到订单簿的AMM金库来说，这不是一个线性问题，而是一个指数级问题。其弊端非常严重：
1. 巨大的计算和状态开销：如果一个金库需要在每个交易周期下单，那么将交易周期减半意味着它现在需要管理两倍的订单。此外，当市场价格变动、金库订单成交以及金库内部“价格”发生变化时，它必须调整订单，取消并替换可能数千个订单以重新调整流动性，这其中还包括处理部分成交的逻辑。这带来了巨大的计算负担。大量的订单也会使区块链状态膨胀。
2. 高昂的 Gas 成本：所有这些操作（下单、取消订单等）都需要 Gas 费用。在像以太坊这样的区块链上，一个金库持续维护数千个独立订单的 Gas 费用将是天文数字。金库的运营将变得经济上不可能，因为运营成本将远远超过流动性提供者赚取的任何交易费用。这就是为什么完全链上、精细化的限价订单簿在速度较慢的区块链上难以获得发展的主要原因。
3. 高延迟和流动性提供商风险：在顺序区块链上，处理数千笔交易需要时间。如果由于区块链拥堵导致金库的订单更新落后于实际市场价格，就会变得脆弱。套利机器人会发现过时、定价错误的订单并进行交易，从而榨干金库流动性提供商的价值。市场波动越快，流动性提供商的损失就越大。

你可以选择精准（小 ticks），也可以选择低成本和低延迟，但在顺序链上，两者无法兼得。然而，在并行链上……

### 如何基于 Monad 解决这一问题

这就是 Monad 架构从根本上改变现状的地方。它直接解决了高精度带来的弊端。
- 并行执行计算：Monad 可以并行处理来自保险库的数千个“取消并替换”订单交易。由于更新价格为 P 的订单与更新价格为 P + tick 的订单并不冲突，因此这些操作非常适合并行化。这大大降低了流动性更新的延迟，保护流动性提供者免受套利。
- 高吞吐量，低 Gas 成本：Monad 每秒处理海量交易的能力（主网每秒 1 万 TPS 或 10 亿 Gas）降低了每笔交易的成本。这使得金库能够以中心化交易所 (CEX) 级别的最小变动单位 (tick size) 管理超粒度的订单簿，从而在经济上可行，因为运营成本变得微不足道。
- 状态访问：MonadDb解决了从存储中读取和写入数千个订单槽的挑战，MonadDb 是一个专为高频并行读取而设计的自定义数据库。
- 流动性提供者 (LP) 风险：Monad 的异步执行和1 秒内完成确认功能，确保这些复杂的流动性更新不仅能够快速处理，而且几乎可以立即完成。这大大减少了价格套利的机会，从而保护了金库中的 LP 免受风险。

本质上，Monad 让 DEX 摆脱了精度与性能之间的权衡。它能够创建一个既具有数学上的精确性，又具有经济可持续性的混合订单簿，为用户提供两全其美的体验：AMM 的被动、轻松体验，以及专业交易场所的敏锐、高效的执行。
现在您已经更好地理解了为什么混合订单簿是良好的流动性来源，以及为什么它们在 Monad 上表现更好，让我们转到 Omnibook 可以提供的下一种流动性类型。

### 链上流动性：利用 DeFi 生态系统

除了自身的混合订单簿之外，Omnibook 的真正优势在于它能够充当整个链上生态系统的通用流动性中心。这意味着它不仅能从自身的金库获取流动性，还能从同一链上运行的所有其他主流 DeFi 协议、其他 CLOB、AMM 甚至聚合器（当然，由于存在重叠，因此并非全部）获取流动性，并将所有这些信息呈现在一个统一的界面上。

让我们分解一下来源以及整合它们的难易程度。

#### 易于集成

- 最简单：DEX 聚合器。如果订单簿 DEX 也拥有简化的掉期 UI（不显示订单簿），它可以轻松地将聚合器集成到其掉期功能中。然而，我们讨论的是 CLOB，因此如果要以深度图（类似完整的订单簿）的形式实时显示聚合器的流动性，那么这无疑是最难的，我稍后会解释原因。
- 简单：其他链上 CLOB。与其他订单簿 DEX 集成是最直接的“同类”集成方式。流动性数据已经是离散格式（特定价格点的限价订单）。主要任务是读取外部订单簿的状态，并将其价格水平和深度映射到 Omnibook 的界面上。
- 难点：直接集成 AMM。直接与 Uniswap 这样的单个 AMM 集成更加复杂。正如我们所讨论的，这需要“黎曼和”逻辑——不断读取 AMM 的内部状态（其曲线），并将该连续函数转换为一系列离散的顺序。虽然计算量很大，但该逻辑是独立的，并且针对的是单一且定义明确的协议。
- 最难：实时聚合深度。这是元问题，也是迄今为止最复杂的集成。为了显示来自聚合器的实时深度图，Omnibook 必须实时执行聚合器的工作。这涉及对所有底层流动性源进行大量计算密集型调用，并在其自身系统中从头构建聚合深度图。它继承了所有其他集成的复杂性。

#### 双重挑战：计算和陈旧性

成功整合这些来源需要克服两个巨大的障碍：表示的计算成本和陈旧数据的经济风险。
1. 计算成本（“如何”问题）
将十几条 AMM 曲线转化为实时订单簿是一项艰巨的计算任务。即使在高性能链上，这真的可行吗？
是的，但这需要策略性的方法。在 Monad 上原生执行这些计算，虽然比顺序链便宜数千倍，但仍然会产生非零成本。有远见的 DEX 不应该将其视为技术障碍，而应该将其作为一种市场进入策略。
在发展阶段，DEX 可以使用其资金库来补贴聚合的 Gas 成本。这将技术成本转化为强大的用户获取工具，为交易者免费提供无与伦比的链上流动性总览。随着 DEX 市场份额的扩大，网络效应逐渐显现：高交易量吸引更多流动性提供者 (LP) 将资金原生部署到 DEX 自身高效的混合金库中。随着时间的推移，DEX 的原生流动性将变得非常深厚，以至于其对昂贵的外部聚合的依赖逐渐减少，从而形成可持续的、长期的竞争壁垒。
那么协处理器呢？它们可以降低计算成本，因为链上任务变成了验证AMM到订单簿转换的证明。然而，以目前的技术，它们无法提供实时的、逐块的更新（如果我错了，请指正）。这种延迟可能会破坏实时交易所的核心目的，对于非紧急交易者来说，实时交易所可能没问题，但在这种情况下，使用基于意图的系统可能是更好的方法。

2. 数据过时的风险（“时间”问题）
这是实时聚合外部流动性过程中固有的更微妙但关键的权衡。这是一个“检查时间到使用时间”（TOCTOU）漏洞，是典型的竞争条件，复杂的 MEV 机器人可以利用它。
以下是市价单的流程：
1.检查时间：在区块 N 中，Omnibook 合约读取外部 Uniswap 池上的价格（例如 3,000 USDC/ETH）。
2.竞赛：MEV 机器人看到用户的交易以此价格为目标，并通过首先向 Uniswap 池提交自己的交易来抢先 Omnibook。
3.使用时间：机器人的交易首先执行，将 Uniswap 的实际价格推高至 3,001 USDC。然后，用户的交易以略低的价格执行。

对于专业交易者来说，0.03% 的滑点就是一种损失。然而，对于进行小额交易的散户来说，获取深度流动性的便利性可能比微小的价差更有价值。这不一定是每个人的“问题”，但获取聚合流动性的已知权衡利弊。DEX的用户界面应该清楚地表明这一点。
此漏洞也会影响限价订单，但方式不同。与滑点不同，MEV 机器人会移动价格，导致交易完全失败，即使价格看似达到了用户的目标，从而产生“虚假订单、价格或流动性”，损害信任。

### Monad 如何使链上聚合更安全、更高效

Monad 的架构旨在克服这种陈旧数据漏洞。
- 缩小套利窗口：Monad 0.5 秒的出块时间是主要的防御措施。“检查”和“使用”之间的时间被压缩。这给套利机器人提供了更小的窗口来发现机会并提交竞争交易。虽然并非不可能利用，但利用起来会变得更加困难，利润也会更低。
- 通过并行执行实现高效查询：Omnibook 需要检查多个外部协议的状态才能找到最佳价格。在顺序链上，这意味着查询 Uniswap，然后等待结果，最后查询 Curve。在 Monad 上，这些检查可以并行执行。Omnibook 可以同时查询所有相关的链上流动性来源，几乎可以即时且高效地全面了解市场情况。
- 可靠的可组合性：作为完全等同于 EVM 的环境，Omnibook 可以无缝集成任何从以太坊移植的协议。Omnibook 可以可靠地调用并与其他合约交互，因为它知道底层执行环境快速、廉价且安全，能够抵御那些困扰速度较慢的区块链的各种延迟攻击。

### 整合中心化交易所 (CEX) 流动性：获得无与伦比的深度

为了真正参与竞争，DEX 需要利用加密货币领域最深的流动性池：中心化交易所。Omnibook 可以通过利用独立中介机构（或称经纪商）网络，以非托管的方式实现这一点。
当用户下单交易，且该交易最适合路由至中心化交易所 (CEX) 时，经纪商会使用用户预存资金的中心化交易所账户，代表用户执行交易，并在链上进行原子结算。在交易完成之前，用户的资金永远不会离开钱包，从而彻底消除了存款风险。

以下是原子结算过程的简化演练：
- 订单与锁定：用户执行吃单，使用 USDC 购买 MON。用户的交易将被路由至经纪商。Monad 上的智能合约会锁定用户的 USDC。
- 链下执行：经纪商的软件检测到锁定资金，这是一个无风险信号，可以继续执行。他们使用自有资金在中心化交易所 (CEX) 上执行相应的买入订单。
- 链上履行：经纪人立即将购买的资产（例如，MON）从 CEX 直接提取到用户的链上钱包中。
- 释放和结算：智能合约自动检测 MON 到达用户钱包，并将锁定的 USDC 释放给经纪人，并收取少量服务费。

##### 挑战：资本和资产可用性
尽管该模型非常优雅，但它在现实世界中也存在两个重大挑战，阻碍了其广泛应用：
1. 经纪商资本问题。经纪商是资本密集型的​​。他们既需要大量的权益才能获得信任，也需要在多个中心化交易所 (CEX) 拥有充足的营运资金才能完成订单。这种高门槛可能导致网络中心化，最终只有少数几家大型、资本雄厚的经纪商参与。然而，随着 Monad 生态系统的成熟，这个问题可以得到缓解。不难想象，在 Monad 上部署共享安全协议（例如 EigenLayer），允许经纪商使用重新质押的资产来满足其资本质押要求，从而显著降低其进入门槛。
2. 中心化交易所 (CEX) 资产可用性问题。经纪人模式仅适用于可在中心化交易所 (CEX) 和 Monad 链之间自由存取的资产，例如 MON 和 USDC。这将限制 Omnibook 的 CEX 集成仅限于这些特定市场。这需要业务发展方面的努力，以鼓励 CEX 上线更多 Monad 原生资产，或允许非原生资产在 Monad 之间存取。然而，随着生态系统的发展，这一挑战自然会得到解决。随着越来越多优质应用在 Monad 上发行代币，并随后在主流 CEX 上线，能够从深度 CEX 流动性集成中受益的市场数量将随着时间的推移而自然增长。
3. 延迟风险问题。这是 Monad 直接解决的关键技术漏洞。经纪商在中心化交易所 (CEX) 上花费自有资金和从链上合约获得补偿之间的时间间隔内面临风险。这个“风险窗口”包括 CEX 提现处理时间，以及最重要的区块链最终确认时间。

### Monad 如何使 Broker 模型可行

Monad 的架构经过独特设计，解决了延迟风险问题，从而使资本问题更易于管理。
- 通过 1 秒确定性解决延迟风险：这是最重要的特性。Monad 的1 秒确定性将经纪商的链上风险窗口从几分钟缩短到一秒。一秒内不可逆的结算是微小且可接受的商业风险。这一特性将经纪商模式从危险的赌博转变为安全、可行且有利可图的模式。
- 提高资本效率：通过降低风险和结算时间，Monad 使经纪商能够更快地循环资金。经纪商可以用相同的资金池每天处理数百或数千笔交易，而在速度较慢的区块链上，这些资金池可能只能处理几十笔交易。这可以提高经纪商的利润，降低进入门槛，从而鼓励更去中心化的经纪商网络参与其中。
- 低成本交易：结算流程由智能合约管理，确保原子经济结果，这意味着交易要么对双方都成功完成，要么完全失败。Monad 的低 Gas 费用确保这种信任最小化的交互成本几乎可以忽略不计，即使价差较小，经纪商也能盈利。

### 基于意图的系统：统一网关

Omnibook 可以利用的最后一层流动性是最具前瞻性的：基于意图的系统。
让我们通过现实世界的类比来快速理解意图：
- 标准交易：你去一家餐馆，自己走进厨房（上链），张开嘴告诉厨师如何烹饪你的饭菜（张开嘴意味着你要花自己的燃气费），然后当场付款。
- 意图（签名信息）：你写一张纸条，上面写着：“我想要一份50美元以下的牛排，这是我的信用卡信息，可以证明我愿意支付。” 然后你把这张纸条交给一位私人购物顾问（即“解决者”）。这位购物顾问（他认识所有最好的屠夫，甚至可能有折扣卡）会去寻找最好的牛排，为你烹饪，然后送货上门。你只需在最终餐点送达时付款，所有中间步骤都由购物顾问处理。

链上交易与链下意图之间的区别：
- 链上交易：当你提交标准交易（例如 Uniswap 上的掉期交易）时，实际上是直接向区块链发送命令。你需要预先支付 Gas 费用，矿工/验证者有义务尝试在链上打包并执行你的命令。
- 链下签名消息：当您签署一个意图时，您将使用您的私钥创建一条数据，内容为：“我，钱包 0xabc...，授权此特定结果”。这条签名消息本身无需提交到区块链，它只是一条数据。它本身不具备任何权力，创建它也无需消耗任何 Gas。然后，您将这条签名消息交给一个解算器或意图网络，他们会接收您授权的意图，并围绕它构建一个实际的、可执行的链上交易。解算器将支付 Gas 费用并提交这笔最终交易。

##### 挑战：碎片化的用户体验
传统上，意图的世界，包括其 RFQ 系统和求解器，与链上 CLOB 的世界是两个截然不同的世界。用户被迫做出选择：“我想要 CLOB 精准透明的体验，还是想要‘黑箱’意图系统可能更优惠的定价？” 这种割裂造成了混乱且低效的用户决策体验。

##### 解决方案：每个订单也是一个意图
下一代 DEX 可以采用强大的并行方法。在 Omnibook 上提交的每一笔订单都会同时被视为两件事：
1. 原生链上 CLOB 上的订单。
2. 向求解器网络公开广播意图。
该系统遵循“两全其美”的原则运行。下单后，DEX 会启动一个非常短的拍卖期（例如，单个 Monad 区块的持续时间）。在此期间，清算者可以竞争以击败原生 CLOB 上的价格。用户可以保证从链上订单簿或链下清算者（以较优者为准）获得最佳执行。

##### 增值：为什么这会改变游戏规则
这种模式具有显著的增值作用，因为它将 DEX 从一个简单的交易场所提升为一个通用的意图平台。
- 保证最优价格：交易者无需在不同系统之间进行选择。他们只需与单一深度订单簿进行交互，即可无缝获取来自各个来源的流动性——包括原生做市商、AMM 以及庞大的链下意图世界。
- 创建流动性超级层：这将产生强大的网络效应。原生 CLOB 流动性现在可以与基于意图的流动性互动。订单簿上的限价订单可以由满足链下意图的求解器执行，反之亦然。整个系统的流动性和效率将超过其各部分之和。
- 通过“意图信号”实现面向未来：这是最显著的优势。该平台不再局限于简单的掉期交易。它可以成为表达任何复杂金融需求的中心。虽然需要一个新的用户界面（UIUX）来简化这些订单的创建，但我认为它带来的益处是值得的。用户可以提交执行交易的意图，例如：
“执行 TWAP（时间加权平均价格）订单，在接下来的一小时内购买 100 ETH。”
“当我的收益农场奖励达到 50 美元时，领取并重新投资。”“仅当gas 价格低于某个阈值时才出售我的 ETH 。”

此外，这不必局限于单条链。这项技术的最终目标是抽象出区块链本身。这正是像Aori这样的协议正在创新的愿景。通过将通用的基于意图的系统与 LayerZero 这样的跨链消息传递层相结合，他们的目标是将 DEX 打造成通往任何链上任何代币的无缝门户。
![CD6](/blog/CD6.png)
想象一下这样的用户体验：基于 Monad 的 DEX 上的用户可以提交意向，将其 USDC 兑换为仅在 Solana 上存在的特定代币。链下解决方案将接受此意向，在后台处理所有复杂的桥接和兑换操作，并将最终的基于 Solana 的代币发送回用户指定的地址。用户只需签署一条消息即可表达他们的意愿。
对于这样的系统，Monad 是理想的“大本营”，一个超高性能、低成本的结算和资产管理中心，用户可以安全高效地与整个多链世界进行交互。这将使 DEX 从一个生态系统的中心转变为通往所有加密货币的真正门户。

##### 权衡与用户选择
这个强大的模型确实存在一些弊端。由于系统需要等待求解器出价，可交易订单的执行会略微延迟（最多一个区块，在 Monad 上大约 1 秒）。虽然对于大多数用户来说，延迟可以忽略不计，尤其是在为了获得更优惠的价格的情况下，但它可能并不适合所有高频策略。
这就是极致用户体验的体现。Omnibook 可以将其作为用户可配置的设置提供。交易者可以选择：
- “优化最佳价格”模式（默认）：广播他们的订单以获得最佳执行。
- “仅限本机”模式：仅将其订单提交给链上 CLOB，选择退出意向系统，以采用最直接的执行路径，尽管执行路径的价格优化程度可能较低。

### Monad 如何实现这一愿景

这个通用意图中心的宏伟愿景给底层链带来了巨大的数据处理负担。
- 处理数据流：平台必须处理持续不断的简单报价、复杂的结构化意图以及求解器解决方案。Monad 的并行执行和 MonadDb对于管理此信息管道而不阻塞网络至关重要。
- 实现复杂的结算：满足多步骤条件意图的求解器将生成非常复杂的交易。Monad 的高 Gas 限额和性能确保这些复杂的交易能够在链上顺利结算。这个强大的结算层使求解器有信心构建和提供更先进的产品。
- 以可信中立性破解“黑箱”：“许多意图系统的最大风险在于依赖中心化的排序器或构建器，这些排序器或构建器可能会审查或抢先交易用户。Monad 的全球分布式验证器集提供了可信中立性。由于没有单一的、占主导地位的实体控制区块生产，任何一方都更难以操纵意图流。这为解决者营造了一个真正公平开放的市场，这直接转化为为用户带来更好、更可靠的结果。

### Omnibook 要点：统一且以用户为中心的未来

Omnibook 不仅仅是一项功能，更是对 DEX 的全新构想。作为通用的流动性枢纽，它解决了当今困扰 DeFi 的核心问题——碎片化。
让我们回顾一下它可以整合的流动性层次：
- 原生混合订单簿：将 CLOB 的精确性与 AMM 保险库的简单性相结合
- 链上流动性：利用 Monad 的高性能和低延迟，安全地利用其他链上协议（如 AMM）
- CEX 流动性：通过非托管经纪商获取 CEX 流动性  
- 基于意图的系统：允许用户下订单，这些订单将以意图的形式并行广播，以便从竞争性求解器网络中获得最佳价格

最终，Omnibook 的复杂性经过精心设计，旨在打造简洁、强大且以用户为中心的体验。用户界面是整个设计的核心。通过一系列简单的切换，交易者可以根据自身的独特需求和风险承受能力定制体验。

想象一下交易者可以选择的界面：
- ☑️原生流动性：最快、最直接的执行路径。 
- ☑️链上聚合：从其他 AMM 获取更深层次的流动性，了解数据陈旧的轻微风险。
- CEX 经纪商网络：利用中心化交易所的深度来获取大额订单。
- 基于意图的优化：将他们的订单广播给求解器以找到绝对最佳价格，接受一秒钟的优化延迟。

这就是最终目标：DEX 不会强迫用户采用单一模型，而是提供一套全面的工具，让用户能够选择构建自己完美的交易体验。
汇总所有流动性之后，让我们探索一下 DEX 如何通过查看 PLOB 来更有效地确保流动性。

## 2. 并行流动性订单簿（PLOB）：增强资本效率

![CD7](/blog/CD7.png)





